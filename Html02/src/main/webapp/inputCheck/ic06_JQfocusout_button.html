<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>** inCheck05: JS,JQ button & focusout 이벤트 활용 **</title>
<script src="../myLib/jquery-3.2.1.min.js"></script>
<script>
	/* => 혼합방식으로 JS submit & JQ focusout 이벤트 활용
	 => input Tag를 개별적으로 사용해야 하므로 
	 -> 개별적 오류 확인을 위한 switch 변수,
	 -> 개별적 focusout 이벤트리스너 핸들러 작성 : JQuery,
	 -> 전체적으로 입력 오류 가 없음을 확인하고 submit 여부를 판단 & 실행 : JS 의 function  
	 */

	// 1) 개별적 오류 확인을 위한 switch 변수 
	var iCheck = false;
	var pCheck = false;
	var nCheck = false;
	var bCheck = false;
	var oCheck = false;
	var wCheck = false;

	// 개별적 focusout 이벤트 핸들러 작성 
	$(function() {
		$('#id').focus();
		$('#id').focusout(function() {

			var id = $('#id').val();

			if (id.length < 4) {
				$('#imessage').html('~~id는 4글자 이상 입니다 ~~ ');
				iCheck = false;
			} else if (id.replace(/[a-z.0-9]/gi, '').length > 0) {
				$('#imessage').html('~~id는 영문자, 숫자로만 입력 하세요 ~~ ');
				iCheck = false;
			} else {
				$('#imessage').html('');
				iCheck = true;
			}
		}); // id_focusout

		$('#password').focusout(function() {

			var password = $('#password').val();
			//password : 길이 4이상,영문자,숫자와 특수문자는 반드시 1개 이상 포함할것
			if (password.length < 4) {
				$('#pmessage').html('~~ password 는 4글자 이상 입니다 ~~');
				pCheck = false;
			} else if (password.replace(/[!-*]/gi, '').length >= password.length) {
			//특수문자가 포함 되어있다면 특수문자를 ''로 replace 한 후 길이가 줄어야 됨 
				$('#pmessage').html('~~ password 는 특수문자가 반드시 1개 이상 포함되어야 합니다');
				pCheck = false;
			} else if (password.replace(/[a-z.0-9.!-*]/gi, '').length > 0) {
				$('#pmessage').html('~~ password 는 영문자,숫자와 특수문자로만 입력 하세요');
				pCheck = false;
			} else {
				$('#pmessage').html('');
				pCheck = true;
			}
		})// password_focusout

		$('#name').focusout(function() {
			var name = $('#name').val();
			if (name.length < 2) {
				$('#nmessage').html('~~ name 는 2글자 이상 입니다 ~~');
				nCheck = false;

			} else if (name.replace(/[a-z.가-힣]/gi, '').length > 0) { // 
				$('#nmessage').html('name는 영문자 , 한글로만 입력하세요');
				nCheck = false;
			} else {
				$('#nmessage').html('');
				nCheck = true;
			}

		});// name_focusout

		$('#birthd').focusout(function() {
			var birthd = $('#birthd').val();

			if (birthd.length != 10) {
				$('#bmessage').html('생년월일을 정확하게 입력하세요(yyyy-mm-dd)');
				bCheck = false;
			} else {
				$('#bmessage').html('');
				bCheck = true;
			}
		});// birthd_focusout

		$('#point').focusout(function() {
			var point = $('#point').val();

			if ($.isNumeric(point) == false) {
				$('#omessage').html(' point는 숫자로만 입력 하세요 ');
				oCheck = false;

			} else if (point.replace(/[.]/g, '').length < point.length) {
				$('#omessage').html(' point는 정수로만 입력 하세요 ');
				oCheck = false;
			} else {
				$('#omessage').html('');
				oCheck = true;
			}
		});// point_focusout

		$('#weight').focusout(function() {
			var weight = $('#weight').val();

			if ($.isNumeric(weight) == false) {
				$('#wmessage').html(' weight는 숫자로만 입력 하세요 ');
				wCheck = false;
			} else if (parseFloat(weight) < 20 || parseFloat(weight) > 200) {
				// else if ( Number(weight) < 20 || Number(weight) > 200)
				$('#wmessage').html(' weight는 값이 범위를 벗어납니다 입력 하세요 ');
				wCheck = false;
			} else {
				$('#wmessage').html('');
				wCheck = true;
			}

		});// weight_focusout

	}); //ready

	//submit 여부를 판단 &실행 : JS 의 function 
	// Error 발생 : return	 
	// Error 없음 : return true -> submit 진행 	

	function inCheck() {
		// 개별적 오류 확인  -> 개별적 오류 확인을 위한 switch 변수	
		if (iCheck == false) {
			$('#imessage').html('ID를 확인하세요~~~');
		}
		if (pCheck == false) {
			$('#pmessage').html('password를 확인하세요~~~');
		}
		if (nCheck == false) {
			$('#nmessage').html('name를 확인하세요~~~');
		}
		if (bCheck == false) {
			$('#bmessage').html('bCheck를 확인하세요~~~');
		}
		if (oCheck == false) {
			$('#omessage').html('point를 확인하세요~~~');
		}
		if (wCheck == false) {
			$('#wmessage').html('weight를 확인하세요~~~');
		}

		//오류 확인 완료 => submit 진행 
		if (iCheck && pCheck && nCheck && 
				bCheck && oCheck && wCheck ) {
			alert('~~ 입력 완료 ,회원 가입 됩니다. ~~');
			$('#myform').submit(); 
		}

	}// inCheck
</script>
<style type="text/css">
	.message{
		color:red;
		font-size:x-small;
		font-style: italic;
	}
</style>

</head>
<body>
	<pre>
		<h2>** input Tag 의 입력값 무결성 점검_button & focusout **</h2>
=> 혼합방식으로 JS button & JQ focusout 이벤트 활용
=> input Tag를 개별적으로 사용해야 하므로 
   -> 개별적 오류 확인을 위한 switch 변수,
   -> 개별적 focusout 이벤트리스너 function 작성 : JQuery,
   -> 전체적으로 입력 오류 가 없음을 확인하고 submit 여부를 판단 & 실행 : JS 의 function
</pre>
	<hr>
	<h2>** inCheck05: submit & focusout JoinForm **</h2>
	<table>
		<form action="join" method="get" id="myForm">
			<tr height="40">
				<td bgcolor="greenyellow">I D</td>
				<td><input type="text" name="id" id="id" size="20"><br>
					<span id="imessage" class="message"></span></td>
			</tr>
			<tr height="40">
				<td bgcolor="greenyellow">Password</td>
				<td><input type="password" name="password" id="password"
					size="20"> <br> <span id="pmessage" class="message"></span>
				</td>
			</tr>
			<tr height="40">
				<td bgcolor="greenyellow">Name</td>
				<td><input type="text" name="name" id="name" size="20">
					<br> <span id="nmessage" class="message"></span></td>
			</tr>
			<tr height="40">
				<td bgcolor="greenyellow">Birthday</td>
				<td><input type="date" name="birthd" id="birthd"> <br>
					<span id="bmessage" class="message"></span></td>
			</tr>
			<tr height="40">
				<td bgcolor="greenyellow">Point</td>
				<td><input type="text" name="point" id="point" size="20">
					<br> <span id="omessage" class="message"></span></td>
			</tr>
			<tr height="40">
				<td bgcolor="greenyellow">Weight</td>
				<td><input type="text" name="weight" id="weight" size="20">
					<br> <span id="wmessage" class="message"></span></td>
			</tr>
			<tr height="40">
				<td></td>
				<td><input type="button" value="가입" onclick=" inCheck()">&nbsp;&nbsp;
					<input type="reset" value="취소"></td>
		</form>
	</table>
	<hr>
</body>
</html>

<!-- 
** 정규 표현식 (정규식:Regular Expression) 객체 : RegExp
=> 자바스크립트의 기본 내장 객체 중의 하나
=> 특정한 규칙을 가진 문자열 집합을 표현하는데 사용하는 형식
* 생성
   var regExp1= new RegExp('text') ;
   var regExp2= /text/ ; 
* 메서드   
   test() : 정규식과 일치하는 문자열이 있으면 true 아니면  false 를 return 
   exec() : 정규식과 일치하는 문자열을 return 
* 예제   
   var regExp= /script/ ; 
   var s='Javascript jQuery Ajax';
   
   var output = regExp.test(s) ;
   alert(output) ; 
* 그러나 주로 문자열의 메서드와 같이 사용됨
    
/.../ : 정규식 RegExp 의 리터럴
g : global, 전역비교
m : 여러줄의 검사 수행
i : 대문자는 소문자 변환후 비교 (대/소문자 구분 없음)

\. : . 문자 (. 는 한 문자를 의미하나 \. 는 . 문자를 의미함)
a-z : abcdefghijklmnopqrstuvwxyz 와 같음
0-9 : 0123456789 와 같음
: : : 문자
_ : _ 문자
- : - 문자
[~.~]: 
[..] : Or 의 묶음. 안에 기록된 1가지외 중복 적용됨.
[^...] : 내부내용의 부정. 기록된 이외의 것을 찾음.
+ : 하나 이상의 반복적용. (단어(?) 찾음)

 -->
